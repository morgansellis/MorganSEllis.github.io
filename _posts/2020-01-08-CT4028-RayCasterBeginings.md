---
layout: post
title: "CT4028 - RayCaster Beginnings"
categories:
  - CT4028 RayCaster
tags:
  - programming
  - RayCaster
  - Project setup
  - C++
  - CT4028
  - Data structures
---

This is the first in a series of tutorial posts that discuss development of an 'old school' RayCaster game like Catacomb 3-D or Wolfenstein 3D.
The intent of these tutorials is to provide content and guidance for the UoG first year Games Programming module CT4028 Game Programming & Design Structures. The assessment for this module is to create a simple renderer in C++ that uses RayCasting to create a 3D environment for a player to navigate with some enemy entities that patrol the level.  

### Initial Project Setup ###

Create a new 'empty project' under Visual Studio 2019, you can really call this project whatever you want. For the sake of ease and being able to read the project name and understand what it might be I've titled mine *CT4028_RayCaster_Framework*.  
I use the following directory structure in my projects, it's good to put everything in it's right place. If you can adhere to the same structure then that wil make following this tutorial series a lot easier. If you disagree with the structure, that's fine, but let's call it a coding standard and you can adopt it for this project.   

![Project Folder Structure](/assets/images/2020-01-08-001.PNG "Project Folder Structure")

In the above image you don't need to add the *bin* or *obj* directory as these will be generated by the build process.  It's more important to ensure that the VS solution and project files are in the same folder.  If they aren't when the project was created that's fine you can move them to the same folder and then easily edit them in notepad++ (or your text editor of choice) as these files are really just fancy *Markup Language* files. If moving the project files (*4028_RayCaster_Framework.vcxproj, .vcxproj.user, etc*) into the same directory as the VS solution file you will need to edit the following line in the solution file to remove any sub directories where the project file listing is (the numbers in your solution file will be different and shouldn't be modified).

{% highlight powershell %}
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "RayCasterFramework", "RayCasterFramework.vcxproj", "{15598231-7053-4CF2-BE0C-61195C28BC8C}"
{% endhighlight %}

Once your folder structure looks the same as mine, we can go ahead and add our first CPP file into the project. Let's call this file **main.cpp** and let's make sure that when we create the new file that we locate it in the **source** directory. Don't save it into the root folder, or into the include directory. 

Great now you have a VS2019 project with an empty main.cpp file. Time to now start tweaking the settings for the VS Project to get our build process set up correctly.

## Project Properties ##

Right click on the project in the Solution Explorer and go to properties (or press *Alt+Enter*) to bring up project properties panel. 
Modify the General Properties tab to have the settings shown in the following image.

![General Properties](/assets/images/2020-01-08-002.PNG "General Properties")

Next up on the **Debugging** tab change the Working Directory to *$(OutDir)*.

![Debugging Properties](/assets/images/2020-01-08-003.PNG "Debugging Properties")

Now modify the **VC++ Directories** tab so that the Source and Include Directories match the following image. Conveniently changes are highlighted in bold!

![VC++ Directories Properties](/assets/images/2020-01-08-004.PNG "VC++ Directories Properties")

Ok so we're going to activate *hard mode* for this development project. Head to the C/C++ properties tab and let's up the warning level and treat warnings as errors. I'll slightly contradict this in a little bit, but we should really be writing error free and warning free code, it's not too difficult to pay attention to our build output warnings and fix our code up so that we're not doing anything dangerous. Of course I am aware that Visual Studio is little bit like an overbearing parent when it comes to warnings, but let's humor it for now.  Get your C/C++ settings to match the following image.

![C/C++ General Properties](/assets/images/2020-01-08-005.PNG "C/C++ General Properties")

Next step under **preprocessor** let's prevent MS from being super helpful and redefining MIN and MAX. We don't strictly need to do this now but if we don't I'll forget about it and then all sorts of fun errors will happen when we come to using some of the STL or defining our own MIN and MAX macros.

![C/C++ Preprocessor Properties](/assets/images/2020-01-08-006.PNG "C/C++ Preprocessor Properties")

Now I know that I just said all warnings should be fixed, but honestly the following warnings are a bit of a pain sometimes, and not always possible for us to fix if we're using 3rd party libraries so under the C/C++ Advanced tab let's disable the following warnings 4099, 4201, 4310. This will solve a headache or two (for now).

![C/C++ Advanced Properties](/assets/images/2020-01-08-007.PNG "C/C++ Advanced Properties")

## Writing Some Code ##

Finally we get to write some code. Let's open up that **main.cpp** file and type up the following. 

![main.cpp - Part 1](/assets/images/2020-01-08-008.PNG "main.cpp part 1")

Ok so we will need to include Windows.h in order for that *UNREFERENCED_PARAMETER* macro to take effect but I know you can handle that much, and this is the first indication that what we're writing here isn't exactly what I would call cross platform. We can come back to this later but for the most part these tutorials and this project are designed to run on a Windows machine.

## Pre-compiled Headers ##

Let's make use of precompiled headers for this project as this will help our build times evetually, and it's a good practice to get into. So a pre-compiled header is where instead of compiling from source files everytime it is included (and the headers subsequent own included source files) an intermediate pre-compiled format is created and used and this intermediate pre-compiled data is only modified or built when the pre-compiled header data changes.  
The Cherno has a great YouTube clip explaining this [The Cherno: Pre-Compiled Headers](https://www.youtube.com/watch?v=UQ718BrbQ5E).

So let's create a filter on our project to hold our pre-compiled headers so that they're kept a little bit out of the way of the rest of our code. Right click in the Solution Explorer on our project and go to Add -> New Filter.  Name the new filter **PCH**, and you should have the following in your solution explorer.

![Solution Explorer - PCH](/assets/images/2020-01-08-009.PNG "Solution Explorer - PCH")

Under this PCH filter we will add our precompiled header file **rc_pch.h**, making sure that we create this header file to exist in our *include* folder.  Then add the following code into *rc_pch.h*.  

{% highlight cpp %}
#pragma once

//System includes
#include <Windows.h>

//STL includes
#include <vector>
#include <sstream>
#include <fstream>
#include <iostream>
#include <string>
#include <algorithm>
{% endhighlight %}

Next up create a source file to accompany this header file, **rc_pch.cpp** making sure that this CPP file is saved/created under the *source* directory. Inside of this *rc_pch.cpp* we will wirte the following code.

{% highlight cpp %}
//Include our PCH Header
#include <rc_pch.h>
{% endhighlight %}

Don't press that build button just yet we need to configure our project settings for using pre-compiled headers. There are two parts to this process, so press Alt+Enter to bring up the project settings or right click and navigate there, whatever your preference.

Get the C/C++ Precompiled Headers tab to look like the following and you're halfway there. 

![Project Properties - Precompiled Headers](/assets/images/2020-01-08-010.PNG "Project Properties - Precompiled Headers")

Step two is to tell our **rc_pch.cpp** file that it is the source file that will generate the pch file. If you forget this step you'll get some errors when you try to build about your precompiled headers not being found or present. 

So right click on the *rc_pch.cpp* file and go to properties. Then under the C/C++ tab navigate to *Precompiled Headers* and set the Precompiled Header option to Create (/Yc), as the following image shows, make sure this is done only for this file and not for the entire projcet.

![rc_pch.cpp Properties - Precompiled Headers](/assets/images/2020-01-08-011.PNG "rc_pch.cpp Properties - Precompiled Headers")

## main.cpp ##

Ok so now in **main.cpp** you should be able to have the following code and build and rund the project without any errors or warnings appearing. Let's try that.  

{% highlight cpp %}
#include <rc_pch.h>

int main(int argc, char* argv[])
{
	UNREFERENCED_PARAMETER(argc);
	UNREFERENCED_PARAMETER(argv);

	
	return 0;
}
{% endhighlight %}

If you get any errors then leave a comment as I've no doubt missed something in the process of documenting this and will add it in so that others won't experience this problem.

Next up in part 2 of this tutorial series we will look at setting up a render window and configuring our console window screen buffer.

.kthanxby.







